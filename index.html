<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="gyro.css">
    <link rel="stylesheet" href="circular-slider.css" />
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <!--<script src="jschannel.js"></script>
    <script type="text/javascript">
        window.module = window.module || {};
    </script>
    <script src="composite.min.js"></script>-->

    <script src="circular-slider.js"></script>
    <script src="flot/jquery.flot.min.js"></script>
    <script src="flot/jquery.flot.selection.min.js"></script>
    <script src="jquery.flot.navigate.js"></script>
    <script src="flot/jquery.flot.crosshair.min.js"></script>

    <script src="jschannel.js"></script>
    <script src="three.min.js"></script>
    <script src="canvasrenderer.js"></script>
    <script src="objloader.js"></script>
    <script src="trackball_controls.js"></script>

    <script src="physics.js" defer='defer'></script> 
    <script src="controls.js" defer='defer'></script>

    <script type="text/javascript">
    var EDX = (function() {
        var state = {
                'selectedObjects': {
                    'cylinder': false,
                    'cube': false
                }
            },
            channel;

        if (window.parent !== window) {
            channel = Channel.build({
                window: window.parent,
                origin: "*",
                scope: "JSInput"
            });

            channel.bind("getGrade", getGrade);
            channel.bind("getState", getState);
            channel.bind("setState", setState);
        }

        function getGrade() {
            result = {
                A: parseFloat( $('input#JA').val() ),
                C: parseFloat( $('input#JC').val() )
            }
            return JSON.stringify( result );
        }

        function getState() {
            return JSON.stringify({});
        }

        function setState() {
            stateStr = arguments.length === 1 ? arguments[0] : arguments[1];
            state = JSON.parse(stateStr);
        }

        return {
            getState: getState,
            setState: setState,
            getGrade: getGrade
        };
    }());
    </script>

    
</head>
<body>
    <div id="info" class="alert alert-info" hidden>
        <div class="close-div">
            <span class="close-btn glyphicon glyphicon-remove"></span>
        </div>
        <h5>Информация</h5>
        <p>
            <i>Слева сверху</i> расположено окно с изображением волчка.
            Удерживая левую кнопку мыши можно вращать угол зрения камеры.
            При помощи колёсика осуществляется приближение и отдаление камеры (зум).
            Кнопка «Начальный вид» возвращает камеру в первоначальное положение.
        </p>
        
        <p>
            <i>Справа сверху</i> расположены поля для задания начальных условий.
            Вращающимися слайдерами задаются начальные углы прецессии, нутации и собственного вращения (в градусах).
            В полях ниже задаются соответствующие начальные угловые скорости (в рад/с).
            Кнопка «Запустить» запускает анимацию движения волчка.
            Кнопка «Заново» приводит параметры волчка к начальным.
        </p>
        <p>
            <i>Снизу</i> расположен график зависимости параметров волчка (углов Эйлера и угловой скорости собственного вращения) от времени.
            При выделение мышью прямоугольной области графика, происходит приближение в эту область.
            Приближение отдаление графика также возможно при помощи колёсика мыши.
            При наведении курсором на график справа сверху показываются значение параметров волчка при данном времени.
        </p>


    </div>
    <div id="viewport"></div>
    <div id="controls">
        <h3>
            Начальные условия
        </h3>
        <div class="column" id="precession">
            <span class="knob-index">$\psi$</span>
            <div  class="knob"></div>
            <span class="der">$\dot\psi$
                <input class="der-input" type="text" value="0.500">
            </span>
        </div>
        <div class="column" id="nutation">
            <span class="knob-index">$\theta$</span>
            <div class="knob"></div>
            <span class="der">$\dot\theta$
                <input class="der-input" type="text" value="0.420">
            </span>
        </div>
        <div class="column"  id="rotation">
            <span class="knob-index">$\varphi$</span>
            <div class="knob"></div>
            <span class="der">$\dot\varphi$
                <input class="der-input" type="text" value="5.000">
            </span>
        </div>
        <div class="clear"></div>
        <div class="control-buttons">
            <button type="button" class="btn btn-default default-view">
                Начальный вид
                <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
            </button>
            <!-- <br/> -->
            <div class="btn-group" aria-label="...">
                <button type="button" class="btn btn-default reset">
                    Заново
                    <span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn btn-default play">
                    <span id="play">
                        Запустить <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
                    </span>
                    <span id="pause" hidden>
                        Остановить <span class="glyphicon glyphicon-pause" aria-hidden="true"></span>
                    </span>
                </button>
            </div>
            <button type="button" class="btn btn-default info">
                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
            </button>
        </div>
        <div id="alert-notification" class="alert alert-danger" role="alert" hidden>У Вас упало :(</div>
    </div>
    <div id="plot-container">
        <div id="plot-placeholder"></div>
    </div>
    <div class="result alert alert-warning">
        <b>Значения для главных моментов инерции: A = <input id="JA" value="0.0">, C = <input id="JC" value="0.0"></b>
    </div>
</body>
</html>